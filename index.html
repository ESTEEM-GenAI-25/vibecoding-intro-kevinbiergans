import React, { useEffect, useState } from "react";
import { motion } from "framer-motion";
import { Mail, Github, Linkedin, FileText, GraduationCap, Phone, MapPin, Link as LinkIcon } from "lucide-react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

// === Helper animation presets ===
const fadeUp = {
  hidden: { opacity: 0, y: 24 },
  show: { opacity: 1, y: 0, transition: { duration: 0.5 } },
};

const Section = ({ id, title, children }: { id: string; title: string; children: React.ReactNode }) => (
  <section id={id} className="py-20 scroll-mt-24">
    <motion.h2
      variants={fadeUp}
      initial="hidden"
      whileInView="show"
      viewport={{ once: true, margin: "-100px" }}
      className="text-3xl md:text-4xl font-bold mb-8"
    >
      {title}
    </motion.h2>
    {children}
  </section>
);

// === DEFAULT CONTENT (overridden by /content.json if present) ===
const DEFAULT_CONTENT = {
  name: "Kevin Biergans",
  tagline: "Master’s student at the University of Notre Dame",
  location: "South Bend, IN",
  email: "kevin.biergans@example.com",
  phone: "(555) 555-5555",
  linkedin: "https://www.linkedin.com/in/kevin-biergans",
  github: "https://github.com/kevin-biergans",
  resume: "/Kevin_Biergans_Resume.pdf", // drop your file in /public
  about:
    "I’m a master’s student at Notre Dame with a builder’s mindset—combining science, data, and business to solve real problems. I enjoy product strategy, user research, and turning messy ideas into simple, useful tools.",
  interests: ["Healthcare + ops", "EdTech", "Analytics", "Product management", "Startups"],
  sectionTitles: {
    about: "About",
    education: "Education",
    experience: "Experience",
    projects: "Projects",
    skills: "Skills",
    contact: "Contact",
  },
  aboutParagraphs: [
    "I like building useful things with a clear ‘why’. My recent work spans user interviews, service design, and lightweight analytics to make better decisions faster.",
    "I’m currently exploring roles in product, operations, or analytics for mission‑driven teams.",
  ],
  education: [
    {
      school: "University of Notre Dame",
      program: "M.S. (ESTEEM) – Engineering, Science & Technology Entrepreneurship",
      dates: "2025 — 2026",
      bullets: [
        "Focus: product discovery, market validation, and go‑to‑market",
        "Projects in healthtech and AI‑enabled productivity",
      ],
    },
    {
      school: "Michigan State University",
      program: "B.S., Physiology (pre‑professional)",
      dates: "2019 — 2023",
      bullets: ["Research experience, leadership in student orgs"],
    },
  ],
  experience: [
    {
      role: "Product/Operations Intern",
      company: "TheraCare.AI (project)",
      dates: "2025",
      bullets: [
        "Interviewed stakeholders and mapped workflows for a family health‑info assistant",
        "Prototyped features, ran usability tests, and defined success metrics",
      ],
    },
    {
      role: "Associate, Customer Success (part‑time)",
      company: "Advocate LLC",
      dates: "2024 — 2025",
      bullets: [
        "Streamlined intake to reduce time‑to‑case‑start by 30%",
        "Built tracking dashboards; standardized client updates",
      ],
    },
  ],
  projects: [
    {
      title: "Health Intake Flow Redesign",
      blurb: "Reduced form friction with progressive disclosure; +22% completion in pilot",
      link: "#",
      tags: ["UX", "Workflow", "Figma"],
    },
    {
      title: "Admissions Outreach Sequencer",
      blurb: "Created a lightweight sequence for recruiting conversations; improved reply rate",
      link: "#",
      tags: ["Growth", "Messaging", "Automation"],
    },
    {
      title: "Data Notebook: Service Ops",
      blurb: "Exploratory analysis of job cycle times and bottlenecks",
      link: "#",
      tags: ["Python", "Pandas", "Plotting"],
    },
  ],
  skills: [
    { group: "Product & Research", items: ["User interviews", "Journey mapping", "JTBD", "A/B basics", "Usability testing"] },
    { group: "Build & Data", items: ["Python", "SQL", "Excel/Sheets", "Figma", "No‑code tooling"] },
    { group: "Business", items: ["Market sizing", "Competitive analysis", "Pricing", "Decks", "Ops"] },
  ],
  highlights: [
    "Hands‑on with interviews & usability tests",
    "Comfortable in Figma, Python, SQL, Sheets",
    "Enjoys clear writing & tight scopes",
  ],
  contactNote:
    "Prefer a quick intro call? Send a couple times that work for you, and I’ll share a calendar link.",
  footerNote: "Built with React + Tailwind.",
};

// === COMPONENT ===
export default function KevinWebsite() {
  const [DATA, setDATA] = useState(DEFAULT_CONTENT);

  useEffect(() => {
    // Attempt to load external content.json for easy customization
    fetch("/content.json")
      .then((res) => (res.ok ? res.json() : null))
      .then((json) => {
        if (json && typeof json === "object") {
          setDATA((prev) => ({ ...prev, ...json }));
        }
      })
      .catch(() => {
        // ignore if not found
      });
  }, []);
  return (
    <div className="min-h-screen bg-neutral-50 dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100">
      {/* Nav */}
      <nav className="sticky top-0 z-50 backdrop-blur border-b border-neutral-200/60 dark:border-neutral-800/60 bg-white/70 dark:bg-neutral-900/70">
        <div className="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
          <a href="#home" className="font-semibold">{DATA.name}</a>
          <div className="hidden md:flex items-center gap-6 text-sm">
          <a href="#about" className="hover:opacity-80">{DATA.sectionTitles?.about ?? "About"}</a>
          <a href="#education" className="hover:opacity-80">{DATA.sectionTitles?.education ?? "Education"}</a>
          <a href="#experience" className="hover:opacity-80">{DATA.sectionTitles?.experience ?? "Experience"}</a>
          <a href="#projects" className="hover:opacity-80">{DATA.sectionTitles?.projects ?? "Projects"}</a>
          <a href="#skills" className="hover:opacity-80">{DATA.sectionTitles?.skills ?? "Skills"}</a>
          <a href="#contact" className="hover:opacity-80">{DATA.sectionTitles?.contact ?? "Contact"}</a>
          </div>
          <div className="flex items-center gap-2">
            <a href={DATA.resume} target="_blank" rel="noreferrer">
              <Button size="sm" variant="default" className="rounded-2xl">Resume</Button>
            </a>
          </div>
        </div>
      </nav>

      {/* Hero */}
      <section id="home" className="max-w-5xl mx-auto px-4 pt-16 pb-10">
        <div className="grid md:grid-cols-[1.2fr_.8fr] gap-8 items-center">
          <motion.div initial={{ opacity: 0, y: 16 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>
            <h1 className="text-4xl md:text-5xl font-extrabold leading-tight">
              {DATA.name}
            </h1>
            <p className="mt-3 text-lg md:text-xl text-neutral-600 dark:text-neutral-300">{DATA.tagline}</p>
            <p className="mt-5 max-w-2xl text-neutral-700 dark:text-neutral-300">{DATA.about}</p>
            <div className="mt-6 flex flex-wrap gap-2">
              {DATA.interests.map((i) => (
                <span key={i} className="px-3 py-1 rounded-full border text-sm border-neutral-300 dark:border-neutral-700">{i}</span>
              ))}
            </div>
            <div className="mt-6 flex gap-3">
              <a href={DATA.linkedin} target="_blank" rel="noreferrer">
                <Button variant="outline" className="rounded-2xl flex items-center gap-2"><Linkedin size={16}/>LinkedIn</Button>
              </a>
              <a href={DATA.github} target="_blank" rel="noreferrer">
                <Button variant="outline" className="rounded-2xl flex items-center gap-2"><Github size={16}/>GitHub</Button>
              </a>
              <a href="#contact">
                <Button className="rounded-2xl flex items-center gap-2"><Mail size={16}/>Contact</Button>
              </a>
            </div>
          </motion.div>

          <motion.div initial={{ opacity: 0, scale: 0.96 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5 }}>
            <Card className="rounded-2xl shadow-md">
              <CardContent className="p-6">
                <div className="space-y-4">
                  <div className="flex items-start gap-3">
                    <GraduationCap className="mt-1" size={18}/>
                    <div>
                      <div className="font-semibold">{DATA.education?.[0]?.school}</div>
                      <div className="text-sm text-neutral-600 dark:text-neutral-400">{DATA.education?.[0]?.program} • {DATA.education?.[0]?.dates}</div>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <MapPin className="mt-1" size={18}/>
                    <div>
                      <div className="font-semibold">{DATA.location}</div>
                      <div className="text-sm text-neutral-600 dark:text-neutral-400">Open to internships & projects</div>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <FileText className="mt-1" size={18}/>
                    <div>
                      <div className="font-semibold">Resume</div>
                      <a className="text-sm underline" href={DATA.resume} target="_blank" rel="noreferrer">View PDF</a>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <LinkIcon className="mt-1" size={18}/>
                    <div>
                      <div className="font-semibold">Links</div>
                      <div className="text-sm text-neutral-600 dark:text-neutral-400 flex gap-3">
                        <a className="underline" href={DATA.linkedin} target="_blank" rel="noreferrer">LinkedIn</a>
                        <a className="underline" href={DATA.github} target="_blank" rel="noreferrer">GitHub</a>
                      </div>
                    </div>
                  </div>
                </div>
              </CardContent>
            </Card>
          </motion.div>
        </div>
      </section>

      {/* About */}
      <div className="max-w-5xl mx-auto px-4">
        <Section id="about" title={DATA.sectionTitles?.about ?? "About"}>
          <div className="grid md:grid-cols-3 gap-6">
            <Card className="md:col-span-2 rounded-2xl">
              <CardContent className="p-6 space-y-3">
                {DATA.aboutParagraphs?.map((p: string, idx: number) => (
                  <p key={idx}>{p}</p>
                ))}
              </CardContent>
            </Card>
            <Card className="rounded-2xl">
              <CardContent className="p-6">
                <div className="font-semibold mb-2">Highlights</div>
                <ul className="list-disc pl-5 space-y-1 text-sm">
                  {DATA.highlights?.map((h: string, i: number) => (
                    <li key={i}>{h}</li>
                  ))}
                </ul>
              </CardContent>
            </Card>
          </div>
        </Section>

        {/* Education */}
        <Section id="education" title={DATA.sectionTitles?.education ?? "Education"}>
          <div className="grid md:grid-cols-2 gap-6">
            {DATA.education.map((ed) => (
              <Card key={ed.school} className="rounded-2xl">
                <CardContent className="p-6">
                  <div className="flex items-start justify-between gap-4">
                    <div>
                      <div className="font-semibold text-lg">{ed.school}</div>
                      <div className="text-sm text-neutral-600 dark:text-neutral-400">{ed.program}</div>
                    </div>
                    <div className="text-sm opacity-80 whitespace-nowrap">{ed.dates}</div>
                  </div>
                  <ul className="list-disc pl-5 mt-3 space-y-1 text-sm">
                    {ed.bullets.map((b, i) => (
                      <li key={i}>{b}</li>
                    ))}
                  </ul>
                </CardContent>
              </Card>
            ))}
          </div>
        </Section>

        {/* Experience */}
        <Section id="experience" title={DATA.sectionTitles?.experience ?? "Experience"}>
          <div className="space-y-6">
            {DATA.experience.map((ex) => (
              <Card key={ex.role + ex.company} className="rounded-2xl">
                <CardContent className="p-6">
                  <div className="flex items-start justify-between gap-4">
                    <div>
                      <div className="font-semibold text-lg">{ex.role}</div>
                      <div className="text-sm text-neutral-600 dark:text-neutral-400">{ex.company}</div>
                    </div>
                    <div className="text-sm opacity-80 whitespace-nowrap">{ex.dates}</div>
                  </div>
                  <ul className="list-disc pl-5 mt-3 space-y-1 text-sm">
                    {ex.bullets.map((b: string, i: number) => (
                      <li key={i}>{b}</li>
                    ))}
                  </ul>
                </CardContent>
              </Card>
            ))}
          </div>
        </Section>

        {/* Projects */}
        <Section id="projects" title={DATA.sectionTitles?.projects ?? "Projects"}>
          <div className="grid md:grid-cols-3 gap-6">
            {DATA.projects.map((p) => (
              <Card key={p.title} className="rounded-2xl hover:shadow-md transition-shadow">
                <CardContent className="p-6">
                  <div className="font-semibold">{p.title}</div>
                  <div className="text-sm text-neutral-600 dark:text-neutral-400 mt-1">{p.blurb}</div>
                  <div className="flex flex-wrap gap-2 mt-3">
                    {p.tags.map((t: string) => (
                      <span key={t} className="px-2 py-0.5 rounded-full border text-xs border-neutral-300 dark:border-neutral-700">{t}</span>
                    ))}
                  </div>
                  {p.link && (
                    <a href={p.link} className="inline-flex items-center gap-2 mt-4 text-sm underline" target="_blank" rel="noreferrer">
                      View <LinkIcon size={14} />
                    </a>
                  )}
                </CardContent>
              </Card>
            ))}
          </div>
        </Section>

        {/* Skills */}
        <Section id="skills" title={DATA.sectionTitles?.skills ?? "Skills"}>
          <div className="grid md:grid-cols-3 gap-6">
            {DATA.skills.map((s) => (
              <Card key={s.group} className="rounded-2xl">
                <CardContent className="p-6">
                  <div className="font-semibold mb-2">{s.group}</div>
                  <div className="flex flex-wrap gap-2 text-sm">
                    {s.items.map((it: string) => (
                      <span key={it} className="px-2 py-0.5 rounded-full border border-neutral-300 dark:border-neutral-700">{it}</span>
                    ))}
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>
        </Section>

        {/* Contact */}
        <Section id="contact" title={DATA.sectionTitles?.contact ?? "Contact"}>
          <Card className="rounded-2xl">
            <CardContent className="p-6">
              <div className="grid md:grid-cols-2 gap-6">
                <div className="space-y-3">
                  <div className="flex items-center gap-3"><Mail size={18}/> <a className="underline" href={`mailto:${DATA.email}`}>{DATA.email}</a></div>
                  <div className="flex items-center gap-3"><Phone size={18}/> <span>{DATA.phone}</span></div>
                  <div className="flex items-center gap-3"><Linkedin size={18}/> <a className="underline" href={DATA.linkedin} target="_blank" rel="noreferrer">LinkedIn</a></div>
                  <div className="flex items-center gap-3"><Github size={18}/> <a className="underline" href={DATA.github} target="_blank" rel="noreferrer">GitHub</a></div>
                </div>
                <div className="text-sm text-neutral-600 dark:text-neutral-400">
                  {DATA.contactNote}
                </div>
              </div>
            </CardContent>
          </Card>
        </Section>

        {/* Footer */}
        <div className="py-10 text-center text-sm text-neutral-500">© {new Date().getFullYear()} {DATA.name}. {DATA.footerNote}</div>
      </div>
    </div>
  );
}
